<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Chroma Key - Ïã§ÏãúÍ∞Ñ ÏõπÏ∫† Î∞∞Í≤Ω ÍµêÏ≤¥</title>
    <link rel="stylesheet" href="styles.css">
    <!-- MediaPipe Selfie Segmentation -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/selfie_segmentation.js" crossorigin="anonymous"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Web Chroma Key</h1>
            <p>Ïã§ÏãúÍ∞Ñ ÏõπÏ∫† Î∞∞Í≤Ω ÍµêÏ≤¥ - MediaPipe Selfie Segmentation</p>
        </header>

        <div class="main-content">
            <!-- Preview Section -->
            <div class="preview-section">
                <div class="preview-card">
                    <div class="preview-header">
                        <h2>ÎØ∏Î¶¨Î≥¥Í∏∞</h2>
                        <div class="camera-controls">
                            <select id="cameraSelect" class="camera-select">
                                <option value="">Í∏∞Î≥∏ Ïπ¥Î©îÎùº</option>
                            </select>
                            <button id="startBtn" class="btn btn-primary">ÏãúÏûë</button>
                            <button id="stopBtn" class="btn btn-danger" style="display:none;">Ï§ëÏßÄ</button>
                        </div>
                    </div>

                    <div class="canvas-wrapper">
                        <canvas id="outputCanvas" width="640" height="480"></canvas>
                        <div id="fpsDisplay" class="fps-display" style="display:none;">FPS: 0</div>
                        <div id="loadingOverlay" class="overlay">
                            <div class="overlay-content">
                                <div class="spinner">‚è≥</div>
                                <p>AI Î™®Îç∏ Î°úÎî© Ï§ë...</p>
                            </div>
                        </div>
                        <div id="readyOverlay" class="overlay">
                            <p>Ïπ¥Î©îÎùºÎ•º ÏãúÏûëÌï¥Ï£ºÏÑ∏Ïöî</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Controls Section -->
            <div class="controls-section">
                <!-- Segmentation Controls -->
                <div class="control-card">
                    <div class="control-group">
                        <label class="toggle-label">
                            <span>Î∞∞Í≤Ω Ï†úÍ±∞</span>
                            <button id="segmentationToggle" class="toggle-btn" data-active="false">
                                <span class="toggle-slider"></span>
                            </button>
                        </label>
                    </div>

                    <div class="control-group">
                        <label class="control-label">ÌíàÏßà</label>
                        <div class="btn-group">
                            <button class="btn-option" data-quality="low">ÎÇÆÏùå</button>
                            <button class="btn-option active" data-quality="medium">Ï§ëÍ∞Ñ</button>
                            <button class="btn-option" data-quality="high">ÎÜíÏùå</button>
                        </div>
                    </div>
                </div>

                <!-- Background Settings -->
                <div class="control-card">
                    <div class="control-group">
                        <input type="file" id="bgImageInput" accept="image/*" style="display:none;">
                        <button id="uploadBtn" class="btn btn-upload">üìÅ Î∞∞Í≤Ω Ïù¥ÎØ∏ÏßÄ ÏÑ†ÌÉù</button>
                        <div id="bgPreview" class="bg-preview" style="display:none;"></div>
                    </div>

                    <div class="control-group">
                        <label class="control-label">Î∞∞Í≤Ω Î™®Îìú</label>
                        <div class="btn-group">
                            <button class="btn-option" data-mode="replace">ÍµêÏ≤¥</button>
                            <button class="btn-option" data-mode="blur">Î∏îÎü¨</button>
                            <button class="btn-option active" data-mode="none">ÏóÜÏùå</button>
                        </div>
                    </div>

                    <div id="blurControl" class="control-group" style="display:none;">
                        <label class="control-label">Î∏îÎü¨: <span id="blurValue">50</span>%</label>
                        <input type="range" id="blurSlider" min="0" max="100" value="50" class="slider">
                    </div>

                    <div id="edgeControl" class="control-group" style="display:none;">
                        <label class="control-label">Í≤ΩÍ≥ÑÏÑ†: <span id="edgeValue">10</span>%</label>
                        <input type="range" id="edgeSlider" min="0" max="50" value="10" class="slider">
                    </div>

                    <div id="tightnessControl" class="control-group" style="display:none;">
                        <label class="control-label">Ï°∞ÏûÑ: <span id="tightnessValue">15</span>%</label>
                        <input type="range" id="tightnessSlider" min="0" max="100" value="15" class="slider">
                    </div>
                </div>

                <!-- Status Info -->
                <div class="control-card status-card">
                    <div class="status-row">
                        <div class="status-item">
                            <span class="status-label">Ìï¥ÏÉÅÎèÑ</span>
                            <span id="resolution" class="status-value">640√ó480</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">FPS</span>
                            <span id="fpsInfo" class="status-value">0</span>
                        </div>
                    </div>
                    <div class="status-row">
                        <div class="status-item">
                            <span id="cameraStatus" class="status-indicator">‚óã Ïπ¥Î©îÎùº</span>
                        </div>
                        <div class="status-item">
                            <span id="segmentationStatus" class="status-indicator">‚óã Î∞∞Í≤ΩÏ†úÍ±∞</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
